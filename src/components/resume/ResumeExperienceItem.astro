---
interface Props {
	company: string;
	role: string;
	date: string;
	intro?: string;
	activities?: string[]; // STAR format bullets
	techStack?: { name: string; description: string }[];
	relatedLinks?: { text: string; url: string }[];
}
const { company, role, date, intro, activities, techStack, relatedLinks } = Astro.props;
---
<div class="mb-8">
  <div class="flex flex-col sm:flex-row justify-between items-start sm:items-baseline mb-2 border-b border-gray-200 pb-2 break-inside-avoid">
    <div class="flex flex-col">
        <h3 class="text-2xl font-bold text-gray-900">{company}</h3>
        <span class="text-xl font-semibold text-gray-700">{role}</span>
    </div>
    <span class="text-md font-medium text-gray-500 mt-1 sm:mt-0">{date}</span>
  </div>
  
  {intro && (
    <div class="mb-4 bg-gray-50 p-4 rounded-lg border border-gray-100 break-inside-avoid">
      <h4 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">Introduction</h4>
      <p class="text-gray-700 text-sm leading-relaxed whitespace-pre-line">{intro}</p>
    </div>
  )}
  
  {activities && activities.length > 0 && (
    <div class="mb-4">
      <h4 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 break-inside-avoid">Key Activities</h4>
      <div class="space-y-3">
        {activities.map(activity => (
          <div class="text-gray-700 text-sm leading-relaxed break-inside-avoid" set:html={activity}></div>
        ))}
      </div>
    </div>
  )}

  {techStack && techStack.length > 0 && (
    <div class="mb-4 break-inside-avoid">
        <h4 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">Tech Stack & Usage</h4>
        <dl class="grid grid-cols-1 sm:grid-cols-[120px_1fr] gap-x-4 gap-y-2 text-sm">
        {techStack.map(tech => (
            <>
                <dt class="font-bold text-gray-800 bg-gray-100 px-2 py-1 rounded self-start text-center text-xs">{tech.name}</dt>
                <dd class="text-gray-700 pt-0.5">{tech.description}</dd>
            </>
        ))}
        </dl>
    </div>
  )}

  {relatedLinks && relatedLinks.length > 0 && (
    <div class="mt-3 pt-3 border-t border-gray-50 no-print break-inside-avoid">
      <span class="text-xs font-bold text-gray-500 uppercase tracking-wider mr-2">Related Posts:</span>
      <div class="flex flex-wrap gap-x-3 gap-y-1 inline-flex">
      {relatedLinks.map((link, index) => (
        <a href={link.url} target="_blank" class="text-sm text-blue-600 hover:text-blue-800 hover:underline flex items-center">
            {link.text} <span class="text-[10px] ml-0.5">â†—</span>
        </a>
      ))}
      </div>
    </div>
  )}
</div>
